!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.tblswvs=e():t.tblswvs=e()}(this,(()=>(()=>{"use strict";var t={607:(t,e,r)=>{var n=r(936),o=r(400),s=r(481),i=r(213);t.exports.MelodyType=n.MelodyType,t.exports.Melody=n.Melody,t.exports.MelodicVector=o.MelodicVector,t.exports.Rhythm=s.Rhythm,t.exports.LindenmayerSystem=i.LindenmayerSystem},213:(t,e,r)=>{r.r(e),r.d(e,{LindenmayerSystem:()=>n});var n=function(){function t(t){this.axiom=t,this.string=t,this.productionRules={}}return t.prototype.add=function(t){this.productionRules[t.matchStr]=t.output},t.prototype.rules=function(){return Object.keys(this.productionRules)},t.prototype.advance=function(){var t=this;this.string=this.string.split(" ").map((function(e){return e in t.productionRules?t.productionRules[e]:e})).join(" ")},t.prototype.matrix=function(){var t=new Array;t.push(new Array);var e=0,r=0,n=[e,r];return this.string.split(" ").forEach((function(o,s){"["==o?(n=[e,r],e=t.length,t.push(new Array),r-=1):"]"==o?(e=n[0],r=n[1]):(t[e][r]=o,r+=1)})),t},t}()},400:(t,e,r)=>{r.r(e),r.d(e,{MelodicVector:()=>o});var n=r(936),o=function(){function t(t){this.steps=t}return t.prototype.applyTo=function(t){var e=Math.ceil(t.steps.length/this.steps.length),r=new Array(e).fill(this.steps).flat().slice(0,t.steps.length),o=t.clone();return o.steps=r.map((function(e,r){return t.melodicMode==n.MelodyType.Degrees&&0==t.steps[r]?0:t.steps[r]==t.restSymbol?t.steps[r]:e+t.steps[r]})),o},t}()},936:(t,e,r)=>{r.r(e),r.d(e,{Melody:()=>u,MelodyType:()=>o});var n,o,s=(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=function(t){function e(r){var n=t.call(this,r)||this;return Object.setPrototypeOf(n,e.prototype),n}return s(e,t),e}(Error),p=function(t,e,r){return r.indexOf(t)===e},l=r(481);!function(t){t.MIDI="MIDI",t.Degrees="Scale Degrees"}(o||(o={}));var u=function(){function t(t,e,r){this.steps=void 0===t?new Array:t,this.restSymbol=void 0===e?0:e,this.melodicMode=null==r?o.Degrees:r}return t.prototype.clone=function(){return new t(this.steps,this.restSymbol,this.melodicMode)},t.newFrom=function(e){var r=e.map((function(t){return t.restSymbol})).filter(p),n=e.map((function(t){return t.melodicMode})).filter(p);if(r.length>1||n.length>1)throw new i("A Sequence can only be made new from and Array of Sequence objects that share the same rest symbol and mode");return new t(e.map((function(t){return t.steps})).flat(),e[0].restSymbol,e[0].melodicMode)},t.prototype.selfReplicate=function(t,e){if(!function(t,e){if(!Number.isInteger(t)||!Number.isInteger(e))throw new i("Numbers must be integers");for(var r=t>e?e:t,n=2;n<=r;n++)if(t%n==0&&e%n==0)return!1;return!0}(t,e=void 0===e?2:e))throw new i("A self-similar melody can only be produced for an input sequence length that is coprime with the output sequence length");var r,n,o,s=new Array(t).fill(-1);s[0]=this.steps[0],s[1]=this.steps[1];var p=s.findIndex((function(t){return-1==t})),l=2;do{r=s.slice(0,p);for(var u=0;u<r.length;u++){n=r[u];for(var c=1;c<=Math.log2(t);c++)s[u*Math.pow(e,c)%t]=n}o=this.steps[l%this.steps.length],-1!=(p=s.findIndex((function(t){return-1==t})))&&(s[p]=o),l++}while(-1!=p);var a=this.clone();return a.steps=s,a},t.prototype.counted=function(){for(var t=new Array,e=1;e<=this.steps.length;e++){var r=new Array(e).fill(1);r.push(0);var n=this.steps.length*(e+1);new l.Rhythm(r,"wrap",n).applyTo(this).steps.forEach((function(e){return t.push(e)}))}var o=this.clone();return o.steps=t,o},t.prototype.zigZag=function(){var e=this,r=this.steps.length%2==0?this.steps.length/2+1:Math.ceil(this.steps.length/2);return new t(this.steps.reduce((function(t,n,o){var s=new Array(r).fill(-1).map((function(t,r){return e.steps[(r+o)%e.steps.length]}));return t.push(s),t.push(s.slice(1,r).reverse()),t}),new Array).flat())},t.infinitySeries=function(e,r,n){void 0===e&&(e=[0,1]),void 0===r&&(r=16),void 0===n&&(n=0);var o=new t,s=e[0],i=e[1]-s;return o.steps=Array.from(new Array(r),(function(t,e){return e+n})).map((function(e){return s+t.norgardInteger(e)*i})),o},t.norgardInteger=function(t){return t.toString(2).split("").map((function(t){return parseInt(t)})).reduce((function(t,e){return 1==e?t+=1:t*=-1,t}),0)},t}()},481:(t,e,r)=>{r.r(e),r.d(e,{Rhythm:()=>o});var n=r(936),o=function(){function t(t,e,r){void 0===e&&(e="wrap"),this.steps=t,this.fillMode=e,this.length=r}return t.prototype.applyTo=function(t){var e=this.steps.filter((function(t){return 0!=t})).length,r=Math.ceil(t.steps.length/e),o=new Array(r).fill(this.steps).flat();if(void 0!==this.length){if(this.length>o.length){var s=this.length-o.length;if("silence"==this.fillMode)o.push.apply(o,new Array(s).fill(0));else{var i=Math.ceil(s/this.steps.length);o.push.apply(o,new Array(i).fill(this.steps).flat())}}o=o.slice(0,this.length)}var p=0;return o.forEach((function(e,r){1==e?(o[r]=t.steps[p%t.steps.length],p++):o[r]=t.restSymbol})),new n.Melody(o,t.restSymbol,t.melodicMode)},t}()}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var s=e[n]={exports:{}};return t[n](s,s.exports,r),s.exports}return r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r(607)})()));